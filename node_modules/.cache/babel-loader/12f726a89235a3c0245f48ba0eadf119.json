{"ast":null,"code":"require(\"formBuilder/dist/form-builder.min.js\");\n\nimport \"src/decidim/decidim_awesome/forms/rich_text_plugin\";\nwindow.CustomFieldsBuilders = window.CustomFieldsBuilders || [];\n$(function () {\n  $(\".awesome-edit-config .proposal_custom_fields_editor\").each(function (_idx, el) {\n    var key = $(el).closest(\".proposal_custom_fields_container\").data(\"key\"); // DOCS: https://formbuilder.online/docs\n\n    window.CustomFieldsBuilders.push({\n      el: el,\n      key: key,\n      config: {\n        i18n: {\n          locale: \"en-US\",\n          location: \"https://cdn.jsdelivr.net/npm/formbuilder-languages@1.1.0/\"\n        },\n        formData: $(\"input[name=\\\"config[proposal_custom_fields][\".concat(key, \"]\\\"]\")).val(),\n        disableFields: [\"button\", \"file\"],\n        disabledActionButtons: [\"save\", \"data\", \"clear\"],\n        disabledAttrs: [\"access\", \"inline\", \"className\"],\n        controlOrder: [\"text\", \"textarea\", \"number\", \"date\", \"checkbox-group\", \"radio-group\", \"select\", \"autocomplete\", \"header\", \"paragraph\"],\n        disabledSubtypes: {\n          text: [\"color\"],\n          // default color as it generate hashtags in decidim (TODO: fix hashtag generator with this)\n          // disable default wysiwyg editors as they present problems\n          textarea: [\"tinymce\", \"quill\"]\n        }\n      },\n      instance: null\n    });\n  });\n  $(document).on(\"formBuilder.create\", function (_event, i, list) {\n    if (!list[i]) {\n      return;\n    }\n\n    $(list[i].el).formBuilder(list[i].config).promise.then(function (res) {\n      list[i].instance = res; // Attach to DOM\n\n      list[i].el.FormBuilder = res; // remove spinner\n\n      $(list[i].el).find(\".loading-spinner\").remove(); // for external use\n\n      $(document).trigger(\"formBuilder.created\", [list[i]]);\n\n      if (i < list.length) {\n        $(document).trigger(\"formBuilder.create\", [i + 1, list]);\n      }\n    });\n  });\n\n  if (window.CustomFieldsBuilders.length) {\n    $(document).trigger(\"formBuilder.create\", [0, window.CustomFieldsBuilders]);\n  }\n\n  $(\"form.awesome-edit-config\").on(\"submit\", function () {\n    window.CustomFieldsBuilders.forEach(function (builder) {\n      $(\"input[name=\\\"config[proposal_custom_fields][\".concat(builder.key, \"]\\\"]\")).val(builder.instance.actions.getData(\"json\"));\n    });\n  });\n});","map":{"version":3,"mappings":"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","names":["require","window","CustomFieldsBuilders","$","each","_idx","el","key","closest","data","push","config","i18n","locale","location","formData","val","disableFields","disabledActionButtons","disabledAttrs","controlOrder","disabledSubtypes","text","textarea","instance","document","on","_event","i","list","formBuilder","promise","then","res","FormBuilder","find","remove","trigger","length","forEach","builder","actions","getData"],"sources":["/home/injam/.rbenv/versions/2.7.5/lib/ruby/gems/2.7.0/gems/decidim-decidim_awesome-0.8.3/app/packs/src/decidim/decidim_awesome/admin/custom_fields_builder.js"],"sourcesContent":["require(\"formBuilder/dist/form-builder.min.js\")\nimport \"src/decidim/decidim_awesome/forms/rich_text_plugin\"\n\nwindow.CustomFieldsBuilders = window.CustomFieldsBuilders || [];\n\n$(() => {\n  $(\".awesome-edit-config .proposal_custom_fields_editor\").each((_idx, el) => {\n    const key = $(el).closest(\".proposal_custom_fields_container\").data(\"key\");\n    // DOCS: https://formbuilder.online/docs\n    window.CustomFieldsBuilders.push({\n      el: el,\n      key: key,\n      config: {\n        i18n: {\n          locale: \"en-US\",\n          location: \"https://cdn.jsdelivr.net/npm/formbuilder-languages@1.1.0/\"\n        },\n        formData: $(`input[name=\"config[proposal_custom_fields][${key}]\"]`).val(),\n        disableFields: [\"button\", \"file\"],\n        disabledActionButtons: [\"save\", \"data\", \"clear\"],\n        disabledAttrs: [\n          \"access\",\n          \"inline\",\n          \"className\"\n        ],\n        controlOrder: [\n          \"text\",\n          \"textarea\",\n          \"number\",\n          \"date\",\n          \"checkbox-group\",\n          \"radio-group\",\n          \"select\",\n          \"autocomplete\",\n          \"header\",\n          \"paragraph\"\n        ],\n        disabledSubtypes: {\n          text: [\"color\"], // default color as it generate hashtags in decidim (TODO: fix hashtag generator with this)\n          // disable default wysiwyg editors as they present problems\n          textarea: [\"tinymce\", \"quill\"]\n        }\n      },\n      instance: null\n    });\n  });\n\n  $(document).on(\"formBuilder.create\", (_event, i, list) => {\n    if (!list[i]) {\n      return;\n    }\n\n    $(list[i].el).formBuilder(list[i].config).promise.then(function(res) {\n      list[i].instance = res;\n      // Attach to DOM\n      list[i].el.FormBuilder = res;\n      // remove spinner\n      $(list[i].el).find(\".loading-spinner\").remove();\n      // for external use\n      $(document).trigger(\"formBuilder.created\", [list[i]]);\n      if (i < list.length) {\n        $(document).trigger(\"formBuilder.create\", [i + 1, list]);\n      }\n    });\n  });\n\n  if (window.CustomFieldsBuilders.length) {\n    $(document).trigger(\"formBuilder.create\", [0, window.CustomFieldsBuilders]);\n  }\n\n  $(\"form.awesome-edit-config\").on(\"submit\", () => {\n    window.CustomFieldsBuilders.forEach((builder) => {\n      $(`input[name=\"config[proposal_custom_fields][${builder.key}]\"]`).val(builder.instance.actions.getData(\"json\"));\n    });\n  });\n});\n\n"]},"metadata":{},"sourceType":"module"}