{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nimport * as L from \"leaflet\";\nimport Controller from \"src/decidim/decidim_awesome/awesome_map/controllers/controller\";\nimport MeetingsFetcher from \"src/decidim/decidim_awesome/awesome_map/api/meetings_fetcher\";\nvar MeetingIcon = L.DivIcon.SVGIcon.DecidimIcon.extend({\n  _createPathDescription: function _createPathDescription() {\n    return \"M 15.991543,4 C 7.3956015,4 2.9250351,10.5 3.000951,16.999999 3.1063486,26.460968 12.747693,30.000004 15.991543,43 19.242091,30.000004 29,26.255134 29,16.999999 29,10.5 23.951131,4 15.996007,4 m -0.153508,2.6000001 a 2.1720294,2.1076698 0 0 1 2.330514,2.1124998 2.177008,2.1125006 0 0 1 -4.354016,0 2.1720294,2.1076698 0 0 1 2.023502,-2.1124998 m -2.651707,4.8056679 h 5.610202 l 3.935584,7.569899 -1.926038,0.934266 -2.009546,-3.859265 v 14.557403 h -2.484243 v -9.126003 h -0.642162 v 9.126003 H 13.190347 V 16.050568 l -2.009545,3.859265 -1.926036,-0.934266 3.935581,-7.569899\";\n  }\n});\n\nvar MeetingsController = /*#__PURE__*/function (_Controller) {\n  _inherits(MeetingsController, _Controller);\n\n  var _super = _createSuper(MeetingsController);\n\n  function MeetingsController(awesomeMap, component) {\n    var _this;\n\n    _classCallCheck(this, MeetingsController);\n\n    _this = _super.call(this, awesomeMap, component);\n    _this.templateId = \"marker-meeting-popup\";\n\n    _this.setFetcher(MeetingsFetcher);\n\n    return _this;\n  }\n\n  _createClass(MeetingsController, [{\n    key: \"loadNodes\",\n    value: function loadNodes() {\n      var _this2 = this; // for each meeting, create a marker with an associated popup\n\n\n      this.fetcher.onNode = function (meeting) {\n        var marker = new L.Marker([meeting.coordinates.latitude, meeting.coordinates.longitude], {\n          icon: _this2.createIcon(MeetingIcon, _this2.awesomeMap.getCategory(meeting.category).color),\n          title: meeting.title.translation\n        }); // console.log(\"new meeting\", meeting, marker)\n\n        _this2.addMarker(marker, meeting);\n      };\n\n      this.fetcher.fetch();\n    }\n  }]);\n\n  return MeetingsController;\n}(Controller);\n\nexport { MeetingsController as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,CAAZ,MAAmB,SAAnB;AACA,OAAOC,UAAP,MAAuB,gEAAvB;AACA,OAAOC,eAAP,MAA4B,8DAA5B;AAEA,IAAMC,WAAW,GAAGH,CAAC,CAACI,OAAFJ,CAAUK,OAAVL,CAAkBM,WAAlBN,CAA8BO,MAA9BP,CAAqC;EACvDQ,sBAAsB,EAAE,kCAAW;IACjC,OAAO,qkBAAP;EACD;AAHsD,CAArCR,CAApB;;IAMqBS,kB;;;;;EACnB,4BAAYC,UAAZ,EAAwBC,SAAxB,EAAmC;IAAA;;IAAAC;;IACjCC,0BAAMH,UAAN,EAAkBC,SAAlB;IACAE,MAAKC,UAAL,GAAkB,sBAAlB;;IACAD,MAAKE,UAAL,CAAgBb,eAAhB;;IAHiC;EAIlC;;;;WAED,qBAAY;MAAA,mBACV;;;MACA,KAAKc,OAAL,CAAaC,MAAb,GAAsB,UAACC,OAAD,EAAa;QACjC,IAAIC,MAAM,GAAG,IAAInB,CAAC,CAACoB,MAAN,CAAa,CAACF,OAAO,CAACG,WAARH,CAAoBI,QAArB,EAA+BJ,OAAO,CAACG,WAARH,CAAoBK,SAAnD,CAAb,EAA4E;UACvFC,IAAI,EAAEC,MAAI,CAACC,UAAL,CAAgBvB,WAAhB,EAA6BsB,MAAI,CAACf,UAAL,CAAgBiB,WAAhB,CAA4BT,OAAO,CAACU,QAApC,EAA8CC,KAA3E,CADiF;UAEvFC,KAAK,EAAEZ,OAAO,CAACY,KAARZ,CAAca;QAFkE,CAA5E,CAAb,CADiC,CAKjC;;QACAN,MAAI,CAACO,SAAL,CAAeb,MAAf,EAAuBD,OAAvB;MANF;;MASA,KAAKF,OAAL,CAAaiB,KAAb;IACD;;;;EAnB6ChC,U;;SAA3BQ,kB","names":["L","Controller","MeetingsFetcher","MeetingIcon","DivIcon","SVGIcon","DecidimIcon","extend","_createPathDescription","MeetingsController","awesomeMap","component","_classCallCheck","_this","templateId","setFetcher","fetcher","onNode","meeting","marker","Marker","coordinates","latitude","longitude","icon","_this2","createIcon","getCategory","category","color","title","translation","addMarker","fetch"],"sources":["/home/injam/.rbenv/versions/2.7.5/lib/ruby/gems/2.7.0/gems/decidim-decidim_awesome-0.8.3/app/packs/src/decidim/decidim_awesome/awesome_map/controllers/meetings_controller.js"],"sourcesContent":["import * as L from \"leaflet\";\nimport Controller from \"src/decidim/decidim_awesome/awesome_map/controllers/controller\";\nimport MeetingsFetcher from \"src/decidim/decidim_awesome/awesome_map/api/meetings_fetcher\";\n\nconst MeetingIcon = L.DivIcon.SVGIcon.DecidimIcon.extend({\n  _createPathDescription: function() {\n    return \"M 15.991543,4 C 7.3956015,4 2.9250351,10.5 3.000951,16.999999 3.1063486,26.460968 12.747693,30.000004 15.991543,43 19.242091,30.000004 29,26.255134 29,16.999999 29,10.5 23.951131,4 15.996007,4 m -0.153508,2.6000001 a 2.1720294,2.1076698 0 0 1 2.330514,2.1124998 2.177008,2.1125006 0 0 1 -4.354016,0 2.1720294,2.1076698 0 0 1 2.023502,-2.1124998 m -2.651707,4.8056679 h 5.610202 l 3.935584,7.569899 -1.926038,0.934266 -2.009546,-3.859265 v 14.557403 h -2.484243 v -9.126003 h -0.642162 v 9.126003 H 13.190347 V 16.050568 l -2.009545,3.859265 -1.926036,-0.934266 3.935581,-7.569899\";\n  }\n});\n\nexport default class MeetingsController extends Controller {\n  constructor(awesomeMap, component) {\n    super(awesomeMap, component)\n    this.templateId = \"marker-meeting-popup\";\n    this.setFetcher(MeetingsFetcher);\n  }\n\n  loadNodes() {\n    // for each meeting, create a marker with an associated popup\n    this.fetcher.onNode = (meeting) => {\n      let marker = new L.Marker([meeting.coordinates.latitude, meeting.coordinates.longitude], {\n        icon: this.createIcon(MeetingIcon, this.awesomeMap.getCategory(meeting.category).color),\n        title: meeting.title.translation\n      });\n      // console.log(\"new meeting\", meeting, marker)\n      this.addMarker(marker, meeting);\n    };\n\n    this.fetcher.fetch();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}