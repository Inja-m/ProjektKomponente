{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n/* eslint no-unused-vars: 0 */\n\n/* eslint consistent-return: 0 */\n\n\nimport axios from \"axios\";\nimport * as React from \"react\";\nimport { Async as AsyncSelect } from \"react-select\";\nimport \"react-select/scss/default.scss\";\nimport PropTypes from \"prop-types\";\nexport var Autocomplete = /*#__PURE__*/function (_React$Component) {\n  _inherits(Autocomplete, _React$Component);\n\n  var _super = _createSuper(Autocomplete);\n\n  function Autocomplete(props) {\n    var _this;\n\n    _classCallCheck(this, Autocomplete);\n\n    _this = _super.call(this, props);\n    _this.minCharactersToSearch = 3;\n\n    _this.handleChange = function (selectedOption) {\n      _this.setState({\n        selectedOption: selectedOption\n      });\n\n      if (_this.props.changeURL) {\n        axios.get(_this.props.changeURL, {\n          headers: {\n            Accept: \"text/javascript\"\n          },\n          withCredentials: true,\n          params: {\n            id: selectedOption.value\n          }\n        }).then(function (response) {\n          var script = document.createElement(\"script\");\n          script.type = \"text/javascript\";\n          script.innerHTML = response.data;\n          document.getElementsByTagName(\"head\")[0].appendChild(script);\n        })[\"catch\"](function (error) {\n          if (axios.isCancel(error)) {// console.log(\"Request canceled\", error.message);\n          } else {//\n          }\n        });\n      }\n    };\n\n    _this.filterOptions = function (options, filter, excludeOptions) {\n      // Do no filtering, just return all options because\n      // we return a filtered set from server\n      return options;\n    };\n\n    _this.onInputChange = function (query) {\n      if (query.length < _this.minCharactersToSearch) {\n        _this.setState({\n          noResultsText: _this.props.searchPromptText\n        });\n      } else {\n        _this.setState({\n          noResultsText: _this.props.noResultsText\n        });\n      }\n    };\n\n    _this.loadOptions = function (query, callback) {\n      var lowerQuery = query.toLowerCase();\n\n      if (_this.cancelTokenSource) {\n        _this.cancelTokenSource.cancel();\n      }\n\n      if (lowerQuery.length < _this.minCharactersToSearch) {\n        return callback(null, {\n          options: [],\n          complete: false\n        });\n      }\n\n      _this.cancelTokenSource = axios.CancelToken.source();\n      axios.get(_this.props.searchURL, {\n        cancelToken: _this.cancelTokenSource.token,\n        headers: {\n          Accept: \"application/json\"\n        },\n        withCredentials: true,\n        params: {\n          term: lowerQuery\n        }\n      }).then(function (response) {\n        // CAREFUL! Only set complete to true when there are no more options,\n        // or more specific queries will not be sent to the server.\n        return callback(null, {\n          options: response.data,\n          complete: true\n        });\n      })[\"catch\"](function (error) {\n        if (!axios.isCancel(error)) {\n          return callback(error, {\n            options: [],\n            complete: false\n          });\n        }\n      });\n    };\n\n    _this.state = {\n      options: props.options,\n      selectedOption: props.selected,\n      searchPromptText: props.searchPromptText,\n      noResultsText: props.noResultsText\n    };\n    return _this;\n  }\n\n  _createClass(Autocomplete, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          autoload = _this$props.autoload,\n          name = _this$props.name,\n          placeholder = _this$props.placeholder;\n      var _this$state = this.state,\n          selectedOption = _this$state.selectedOption,\n          options = _this$state.options,\n          searchPromptText = _this$state.searchPromptText,\n          noResultsText = _this$state.noResultsText;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"autocomplete-field\"\n      }, /*#__PURE__*/React.createElement(AsyncSelect, {\n        cache: false,\n        name: name,\n        value: selectedOption,\n        options: options,\n        placeholder: placeholder,\n        searchPromptText: searchPromptText,\n        noResultsText: noResultsText,\n        onChange: this.handleChange,\n        onInputChange: this.onInputChange,\n        loadOptions: this.loadOptions,\n        filterOptions: this.filterOptions,\n        autoload: autoload,\n        removeSelected: true,\n        escapeClearsValue: false,\n        onCloseResetsInput: false\n      }));\n    }\n  }]);\n\n  return Autocomplete;\n}(React.Component);\nAutocomplete.defaultProps = {\n  autoload: false\n};\nAutocomplete.propTypes = {\n  changeURL: PropTypes.string,\n  searchPromptText: PropTypes.string,\n  noResultsText: PropTypes.string,\n  searchURL: PropTypes.string,\n  selected: PropTypes.string,\n  options: PropTypes.array,\n  autoload: PropTypes.bool,\n  name: PropTypes.string,\n  placeholder: PropTypes.string\n};\nexport default Autocomplete;","map":{"version":3,"mappings":"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","names":["axios","React","Async","AsyncSelect","PropTypes","Autocomplete","_inherits","props","_classCallCheck","_this","minCharactersToSearch","handleChange","selectedOption","setState","changeURL","get","headers","Accept","withCredentials","params","id","value","then","response","script","document","createElement","type","innerHTML","data","getElementsByTagName","appendChild","error","isCancel","filterOptions","options","filter","excludeOptions","onInputChange","query","length","noResultsText","searchPromptText","loadOptions","callback","lowerQuery","toLowerCase","cancelTokenSource","cancel","complete","CancelToken","source","searchURL","cancelToken","token","term","state","selected","_createClass","key","autoload","name","placeholder","className","cache","onChange","removeSelected","escapeClearsValue","onCloseResetsInput","Component","defaultProps","propTypes","string","array","bool"],"sources":["/home/injam/.rbenv/versions/2.7.5/lib/ruby/gems/2.7.0/gems/decidim-admin-0.26.2/app/packs/src/decidim/admin/autocomplete.component.js"],"sourcesContent":["/* eslint no-unused-vars: 0 */\n/* eslint consistent-return: 0 */\n\nimport axios from \"axios\";\nimport * as React from \"react\";\nimport { Async as AsyncSelect } from \"react-select\";\nimport \"react-select/scss/default.scss\";\nimport PropTypes from \"prop-types\";\n\nexport class Autocomplete extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.minCharactersToSearch = 3;\n\n    this.handleChange = (selectedOption) => {\n      this.setState({ selectedOption });\n      if (this.props.changeURL) {\n        axios.get(this.props.changeURL, {\n          headers: {\n            Accept: \"text/javascript\"\n          },\n          withCredentials: true,\n          params: {\n            id: selectedOption.value\n          }\n        }).\n          then((response) => {\n            const script = document.createElement(\"script\");\n            script.type = \"text/javascript\";\n            script.innerHTML = response.data;\n            document.getElementsByTagName(\"head\")[0].appendChild(script);\n          }).\n          catch((error) => {\n            if (axios.isCancel(error)) {\n              // console.log(\"Request canceled\", error.message);\n            }\n            else {\n              //\n            }\n          });\n      }\n    };\n\n    this.filterOptions = (options, filter, excludeOptions) => {\n      // Do no filtering, just return all options because\n      // we return a filtered set from server\n      return options;\n    };\n\n    this.onInputChange = (query) => {\n      if (query.length < this.minCharactersToSearch) {\n        this.setState({ noResultsText: this.props.searchPromptText });\n      }\n      else {\n        this.setState({ noResultsText: this.props.noResultsText });\n      }\n    };\n\n    this.loadOptions = (query, callback) => {\n      const lowerQuery = query.toLowerCase();\n\n      if (this.cancelTokenSource) {\n        this.cancelTokenSource.cancel();\n      }\n\n      if (lowerQuery.length < this.minCharactersToSearch) {\n        return callback(null, { options: [], complete: false });\n      }\n\n      this.cancelTokenSource = axios.CancelToken.source();\n      axios.get(this.props.searchURL, {\n        cancelToken: this.cancelTokenSource.token,\n        headers: {\n          Accept: \"application/json\"\n        },\n        withCredentials: true,\n        params: {\n          term: lowerQuery\n        }\n      }).\n        then((response) => {\n          // CAREFUL! Only set complete to true when there are no more options,\n          // or more specific queries will not be sent to the server.\n          return callback(null, { options: response.data, complete: true });\n        }).\n        catch((error) => {\n          if (!axios.isCancel(error)) {\n            return callback(error, { options: [], complete: false });\n          }\n        });\n    };\n\n    this.state = {\n      options: props.options,\n      selectedOption: props.selected,\n      searchPromptText: props.searchPromptText,\n      noResultsText: props.noResultsText\n    };\n  }\n\n  render() {\n    const { autoload, name, placeholder } = this.props;\n    const { selectedOption, options, searchPromptText, noResultsText } = this.state;\n\n    return (\n      React.createElement(\"div\", { className: \"autocomplete-field\" },\n        React.createElement(AsyncSelect, {\n          cache: false,\n          name: name,\n          value: selectedOption,\n          options: options,\n          placeholder: placeholder,\n          searchPromptText: searchPromptText,\n          noResultsText: noResultsText,\n          onChange: this.handleChange,\n          onInputChange: this.onInputChange,\n          loadOptions: this.loadOptions,\n          filterOptions: this.filterOptions,\n          autoload: autoload,\n          removeSelected: true,\n          escapeClearsValue: false,\n          onCloseResetsInput: false\n        })\n      )\n    );\n  }\n}\n\nAutocomplete.defaultProps = {\n  autoload: false\n};\n\nAutocomplete.propTypes = {\n  changeURL: PropTypes.string,\n  searchPromptText: PropTypes.string,\n  noResultsText: PropTypes.string,\n  searchURL: PropTypes.string,\n  selected: PropTypes.string,\n  options: PropTypes.array,\n  autoload: PropTypes.bool,\n  name: PropTypes.string,\n  placeholder: PropTypes.string\n}\n\nexport default Autocomplete;\n"]},"metadata":{},"sourceType":"module"}