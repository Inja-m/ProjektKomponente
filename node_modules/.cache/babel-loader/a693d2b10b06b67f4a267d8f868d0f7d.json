{"ast":null,"code":"$(function () {\n  window.DecidimAwesome = window.DecidimAwesome || {};\n  var token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n  var $textarea = $(\"textarea#proposal_body\");\n  var t = window.DecidimAwesome.texts.drag_and_drop_image;\n\n  if (!$textarea.length) {\n    return;\n  }\n\n  if (window.DecidimAwesome.allow_images_in_proposals) {\n    // Add the capability to upload images only (they will be presented as links)\n    $textarea.after(\"<p class=\\\"help-text\\\">\".concat(t, \"</p>\"));\n    $textarea.inlineattachment({\n      uploadUrl: window.DecidimAwesome.editor_uploader_path,\n      uploadFieldName: \"image\",\n      jsonFieldName: \"url\",\n      progressText: \"[Uploading file...]\",\n      urlText: \"{filename}\",\n      extraHeaders: {\n        \"X-CSRF-Token\": token\n      }\n    });\n  }\n});","map":{"version":3,"mappings":"AAAAA,CAAC,CAAC,YAAM;EACNC,MAAM,CAACC,cAAPD,GAAwBA,MAAM,CAACC,cAAPD,IAAyB,EAAjDA;EAEA,IAAME,KAAK,GAAGH,CAAC,CAAC,yBAAD,CAADA,CAA6BI,IAA7BJ,CAAkC,SAAlCA,CAAd;EACA,IAAMK,SAAS,GAAGL,CAAC,CAAC,wBAAD,CAAnB;EACA,IAAMM,CAAC,GAAGL,MAAM,CAACC,cAAPD,CAAsBM,KAAtBN,CAA4BO,mBAAtC;;EAEA,IAAI,CAACH,SAAS,CAACI,MAAf,EAAuB;IACrB;EACD;;EAED,IAAIR,MAAM,CAACC,cAAPD,CAAsBS,yBAA1B,EAAqD;IACnD;IAEAL,SAAS,CAACM,KAAVN,kCAAwCC,CAAxC;IACAD,SAAS,CAACO,gBAAVP,CAA2B;MACzBQ,SAAS,EAAEZ,MAAM,CAACC,cAAPD,CAAsBa,oBADR;MAEzBC,eAAe,EAAE,OAFQ;MAGzBC,aAAa,EAAE,KAHU;MAIzBC,YAAY,EAAE,qBAJW;MAKzBC,OAAO,EAAE,YALgB;MAMzBC,YAAY,EAAE;QAAE,gBAAgBhB;MAAlB;IANW,CAA3BE;EAQD;AAvBF,EAADL","names":["$","window","DecidimAwesome","token","attr","$textarea","t","texts","drag_and_drop_image","length","allow_images_in_proposals","after","inlineattachment","uploadUrl","editor_uploader_path","uploadFieldName","jsonFieldName","progressText","urlText","extraHeaders"],"sources":["/home/injam/.rbenv/versions/2.7.5/lib/ruby/gems/2.7.0/gems/decidim-decidim_awesome-0.8.3/app/packs/src/decidim/decidim_awesome/proposals/images.js"],"sourcesContent":["$(() => {\n  window.DecidimAwesome = window.DecidimAwesome || {};\n\n  const token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n  const $textarea = $(\"textarea#proposal_body\");\n  const t = window.DecidimAwesome.texts.drag_and_drop_image;\n\n  if (!$textarea.length) {\n    return;\n  }\n\n  if (window.DecidimAwesome.allow_images_in_proposals) {\n    // Add the capability to upload images only (they will be presented as links)\n\n    $textarea.after(`<p class=\"help-text\">${t}</p>`);\n    $textarea.inlineattachment({\n      uploadUrl: window.DecidimAwesome.editor_uploader_path,\n      uploadFieldName: \"image\",\n      jsonFieldName: \"url\",\n      progressText: \"[Uploading file...]\",\n      urlText: \"{filename}\",\n      extraHeaders: { \"X-CSRF-Token\": token }\n    });\n  }\n});\n"]},"metadata":{},"sourceType":"module"}